<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Telescope TOD &mdash; PyTOAST 2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="PyTOAST 2.0 documentation" href="index.html" />
    <link rel="next" title="Data Intervals" href="intervals.html" />
    <link rel="prev" title="Data Distribution" href="dist.html" /> 
  </head>
  <body role="document">
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>PyTOAST 2.0 documentation</span></a></h1>
        <h2 class="heading"><span>Telescope TOD</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="dist.html">Data Distribution</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="intervals.html">Data Intervals</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="telescope-tod">
<span id="tod"></span><h1>Telescope TOD<a class="headerlink" href="#telescope-tod" title="Permalink to this headline">¶</a></h1>
<p>The TOD base class represents the timestream information describing a telescope that is acquiring data.  The base class enforces a minimal set of methods for reading and writing detector data and flags, detector pointing, and timestamps.  The base class also provide methods for returning information about the data distribution, including which samples are local to a given process.</p>
<dl class="class">
<dt id="toast.tod.TOD">
<em class="property">class </em><code class="descclassname">toast.tod.</code><code class="descname">TOD</code><span class="sig-paren">(</span><em>mpicomm=&lt;mpi4py.MPI.Intracomm object&gt;</em>, <em>timedist=True</em>, <em>detectors=None</em>, <em>samples=0</em>, <em>sizes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/toast/tod/tod.html#TOD"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#toast.tod.TOD" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for an object that provides detector pointing and
timestreams for a single observation.</p>
<p>Each TOD class has one or more detectors, and this class provides
pointing quaternions and flags for each detector.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>mpicomm</strong> (<em>mpi4py.MPI.Comm</em>) &#8211; the MPI communicator over which the data is distributed.</li>
<li><strong>timedist</strong> (<em>bool</em>) &#8211; if True, the data is distributed by time, otherwise by
detector.</li>
<li><strong>detectors</strong> (<em>list</em>) &#8211; list of names to use for the detectors.</li>
<li><strong>samples</strong> (<em>int</em>) &#8211; the number of global samples represented by this TOD object.</li>
<li><strong>sizes</strong> (<em>list</em>) &#8211; specify the indivisible chunks in which to split the samples.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="toast.tod.TOD.detectors">
<code class="descname">detectors</code><a class="headerlink" href="#toast.tod.TOD.detectors" title="Permalink to this definition">¶</a></dt>
<dd><p><em>(list)</em> &#8211; The total list of detectors.</p>
</dd></dl>

<dl class="attribute">
<dt id="toast.tod.TOD.local_dets">
<code class="descname">local_dets</code><a class="headerlink" href="#toast.tod.TOD.local_dets" title="Permalink to this definition">¶</a></dt>
<dd><p><em>(list)</em> &#8211; The detectors assigned to this process.</p>
</dd></dl>

<dl class="attribute">
<dt id="toast.tod.TOD.local_samples">
<code class="descname">local_samples</code><a class="headerlink" href="#toast.tod.TOD.local_samples" title="Permalink to this definition">¶</a></dt>
<dd><p><em>(2-tuple)</em> &#8211; The first element of the tuple is the first global
sample assigned to this process.  The second element of
the tuple is the number of samples assigned to this
process.</p>
</dd></dl>

<dl class="attribute">
<dt id="toast.tod.TOD.mpicomm">
<code class="descname">mpicomm</code><a class="headerlink" href="#toast.tod.TOD.mpicomm" title="Permalink to this definition">¶</a></dt>
<dd><p><em>(mpi4py.MPI.Comm)</em> &#8211; the communicator assigned to this TOD.</p>
</dd></dl>

<dl class="attribute">
<dt id="toast.tod.TOD.timedist">
<code class="descname">timedist</code><a class="headerlink" href="#toast.tod.TOD.timedist" title="Permalink to this definition">¶</a></dt>
<dd><p><em>(bool)</em> &#8211; if True, the data is time-distributed.</p>
</dd></dl>

<dl class="attribute">
<dt id="toast.tod.TOD.total_chunks">
<code class="descname">total_chunks</code><a class="headerlink" href="#toast.tod.TOD.total_chunks" title="Permalink to this definition">¶</a></dt>
<dd><p><em>(list)</em> &#8211; the full list of sample sizes that were used in computing
the data distribution.</p>
</dd></dl>

<dl class="attribute">
<dt id="toast.tod.TOD.total_samples">
<code class="descname">total_samples</code><a class="headerlink" href="#toast.tod.TOD.total_samples" title="Permalink to this definition">¶</a></dt>
<dd><p><em>(int)</em> &#8211; the total number of samples in this TOD.</p>
</dd></dl>

</dd></dl>

<p>The base TOD class contains a member which is an instance of a Cache object.  This is similar to a dictionary of arrays, but by default the memory used in these arrays is allocated in C, rather than using the python memory pool.  This allows us to do aligned memory allocation and explicitly manage the lifetime of the memory.</p>
<dl class="class">
<dt id="toast.tod.Cache">
<em class="property">class </em><code class="descclassname">toast.tod.</code><code class="descname">Cache</code><span class="sig-paren">(</span><em>pymem=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/toast/tod/cache.html#Cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#toast.tod.Cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Timestream data cache with explicit memory management.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pymem</strong> (<em>bool</em>) &#8211; if True, use python memory rather than external
allocations in C.  Only used for testing.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="toast.tod.Cache.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><em>pattern=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/toast/tod/cache.html#Cache.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#toast.tod.Cache.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear one or more buffers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pattern</strong> (<em>str</em>) &#8211; a regular expression to match against the buffer
names when determining what should be cleared.  If None,
then all buffers are cleared.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="toast.tod.Cache.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>name</em>, <em>type</em>, <em>shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/toast/tod/cache.html#Cache.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#toast.tod.Cache.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a named data buffer of the give type and shape.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>str</em>) &#8211; the name to assign to the buffer.</li>
<li><strong>type</strong> (<em>numpy.dtype</em>) &#8211; one of the supported numpy types.</li>
<li><strong>shape</strong> (<em>tuple</em>) &#8211; a tuple containing the shape of the buffer.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="toast.tod.Cache.destroy">
<code class="descname">destroy</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/toast/tod/cache.html#Cache.destroy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#toast.tod.Cache.destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>Deallocate the specified buffer.</p>
<p>Only call this if all numpy arrays that reference the memory
are out of use.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>str</em>) &#8211; the name of the buffer to destroy.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="toast.tod.Cache.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/toast/tod/cache.html#Cache.exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#toast.tod.Cache.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether a buffer exists.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>str</em>) &#8211; the name of the buffer to search for.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if the buffer exists.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(bool)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="toast.tod.Cache.reference">
<code class="descname">reference</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/toast/tod/cache.html#Cache.reference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#toast.tod.Cache.reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a numpy array pointing to the buffer.</p>
<p>The returned array will wrap a pointer to the raw buffer, but will
not claim ownership.  When the numpy array is garbage collected, it
will NOT attempt to free the memory (you must manually use the
destroy method).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>str</em>) &#8211; the name of the buffer to return.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a numpy array wrapping the raw data buffer.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(array)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="dist.html">Data Distribution</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="intervals.html">Data Intervals</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2015-2016, Theodore Kisner, Reijo Keskitalo.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>